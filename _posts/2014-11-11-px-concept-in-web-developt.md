---
layout: post
title: 移动web开发——像素
published: true
tags: [像素 px ppi dpi Retina]
---

# 移动web开发——像素

熟悉桌面web开发的朋友对于像素(px)都不陌生，在桌面浏览器里我们经常使用px对页面
进行布局， 这对于精确控制页面非常有效，一个<code>font-size: 14px;</code>的文字在各桌面
浏览器上都显示成几乎相同的大小。直观上，一个像素就是显示器上的一个点，
我们就用这些点来控制页面上的元素，这理解上去如此自然，以至于我们从不用认真思考它。

但是随着移动web的到来，问题开始变的复杂。手机如此小的屏幕却拥有如此高的分辨率，
有的甚至比桌面设备的分辨率还要高，在如此精细的屏幕上如果还用14个像素渲染一个
<code>font-size: 14px;</code>的文字是否还适合阅读？为什么拥有640 * 960的iPhone 4/S在浏览器
里却报告自己是320 * 480的？这时候就有必要梳理一下px相关的概念了。

## 硬件像素/设备像素

> 我们大都熟悉硬件像素。硬件像素是显示屏上能够显示的最小的点，通常由红、绿、蓝三个子像素构成。从这三个子像素中穿过的光线混合起来，为我们创造了一个像素的颜色。硬件像素与屏幕上的物理元素一一对应，不能拉伸、扭曲，也不能再分。这些特点让硬件像素很像原子——任何设计作品中最基本的单位。

px是逻辑长度单位，并不是我们真实世界里能感知到大小的物理单位，比如英寸，厘米，米等。
一个px在物理上有多大取决于屏幕的分辨率和和屏幕的尺寸，即屏幕的像素密度PPI。

## PPI和DPI

PPI是英文Pixels Per Inch的缩写，由字面意思很好理解——每英寸的像素数量，即像素密度。计算公式也很简单，

![ppi](/imgs/ppi-formular.jpg)

(X：长度像素数；Y：宽度像素数；Z：屏幕尺寸即对角线长度)

以毫米mm为单位那么一个像素的大小就是25.4/PPI(1in=25.4mm)。iPhon 4/S的PPI是326，则像素大小为25.4/326 ~= 0.078mm。

<img width="100%" src="/imgs/px-size.jpeg" alt="">

对于非Retina屏的桌面设备，像素密度通常在72-120之间。

一般桌面浏览器的默认字体大小是16px，即1em=16px。在印刷领域，m是英文中最宽的字母，所以用em来表示印刷的字宽，标准是12pt。
1pt=1/72in，window桌面显示设备的默认PPI是96，即1px=1/96in，简单换算1em=16px。不同的设备默认字体大小会有例外，比如kindle touch
的默认字体大小是26px。

DPI(Dots Per Inch)是印刷行业使用的概念，表示打印机每英寸可以喷墨的点数。PPI的概念就是借鉴自DPI。

## Retina屏

苹果公司在发布iPhone 4时引入了视网膜屏(Retina display)这个概念。之所以叫做视网膜屏是因为屏幕的PPI太高，高到
人眼视网膜分辨不出屏幕上的像素点。同样为3.5寸屏幕，iphone 4/S的PPI为326，是iPhone 3G/S的两倍。

<img width="100%" src="/imgs/retina-01.png" alt="">

第三代iPad发布会上，苹果给出了Retina设计标准的公式：

![retina](/imgs/retina-formular.jpg)

> 其中 a代表人眼视角，h 代表像素间距，d代表肉眼与屏幕的距离。符合以上条件的屏幕可以使肉眼看不见单个物理像素点。这样的IPS屏幕就可被苹果称作“Retina显示屏”。将通常使用距离代入上公式可知：行动电话显示器的像素密度达到或高于300ppi就不会再出现颗粒感；手持平板类电器显示器的像素密度达到或高于260ppi就不会再出现颗粒感，而苹果电脑的Retina显示器像素密度只要超过200ppi就无法区分出单独的像素。

Retina是苹果注册的命名，其他厂商只能使用类似“HI-DPI”等名称，不过意思是一样的。

### 参照像素

既然px不是物理单位，而且PPI越高px尺寸越小，在各厂商都在追求高PPI的今天1px到底要多大才适合人类阅读呢。w3c为所有基于像素
的度量定义了一个标准，叫做[参考像素](http://www.w3.org/TR/CSS2/syndata.html#length-units)。

<img width="100%" src="/imgs/px-01.jpeg" alt="">

对于phone来说0.148mm是一个比较合理的大小。

参照像素是与硬件像素无关的，这样基于像素的设计就不必局限在硬件像素上。同样的参照像素，在phone上就会很小，而在投影设备上就会很大。

### css像素

相对于硬件像素，在web开发中还有一个更常用的概念——css像素。css像素是与屏幕无关的，这意味着css像素与设备像素可能不是一一对应的。
在多数非Retina屏的桌面设备上，“正常状态”下一个css像素对应一个硬件像素。在桌面浏览器端“正常状态”是指缩放为100%。

在一个缩放100%的页面上放置一个128px * 128px的元素，然后将页面放大到200%，元素的大小变成了以前的4倍，占据256px * 256px的大小，
但是在css定义上元素还是128px * 128px, 这时一个css像素实际上等于两个硬件像素。

通过图示来解释这个过程。

一个css像素等于一个硬件像素，css像素与硬件像素重叠。

![100%](/imgs/csspixels_100.gif)    

现在缩小页面，css像素开始收缩，一个硬件像素覆盖了多个css像素。

![out](/imgs/csspixels_out.gif)    

对页面进行放大，css像素开始变大，一个css像素覆盖了多个硬件像素。

![in](/imgs/csspixels_in.gif)    

在Retina设备上，一个css像素可能会对应多个硬件像素，这一点对于web开发和设计来说非常重要。

举例来说，iPhone 3GS上1px=0.156mm，而在iPhone 4/S上这个值减小了一半，只有0.078mm，同样一个20px * 20px的按钮，渲染在iPhone 4/S
上只有iphone 3G/S上的1/4大小。

## DP、PT、SP

## device-pixel-ratio

